<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Hi Jayesh<div><br></div><div>I downloaded the lasted release for Windows. I installed the msi package in my Windows machine.</div><div><br></div><div>coll_perf works with this configuration. However I tested &nbsp;coll_perf including some ADIO primitives in order to test the values of flat-&gt;count</div><div><br></div><div>I tried print the value of flat-&gt;count using the datatype created by coll_perf. I included some code into coll_perf implementation as shown following:</div><div><br></div><div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp;&nbsp;array_of_distribs[0] = MPI_DISTRIBUTE_BLOCK;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; array_of_distribs[1] = MPI_DISTRIBUTE_BLOCK;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; array_of_distribs[2] = MPI_DISTRIBUTE_BLOCK;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; min-height: 12px; "><br></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; array_of_dargs[0] = MPI_DISTRIBUTE_DFLT_DARG;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; array_of_dargs[1] = MPI_DISTRIBUTE_DFLT_DARG;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; array_of_dargs[2] = MPI_DISTRIBUTE_DFLT_DARG;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; min-height: 12px; "><br></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; <span style="color: #0000ff">for</span> (i=0; i&lt;ndims; i++) array_of_psizes[i] = 0;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; MPI_Dims_create(nprocs, ndims, array_of_psizes);</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; min-height: 12px; "><br></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; MPI_Type_create_darray(nprocs, mynod, ndims, array_of_gsizes,&nbsp;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; "><span class="Apple-tab-span" style="white-space:pre">			</span> &nbsp; array_of_distribs, array_of_dargs,</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; "><span class="Apple-tab-span" style="white-space:pre">			</span> &nbsp; array_of_psizes, order, MPI_INT, &amp;newtype);</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; MPI_Type_commit(&amp;newtype);</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; min-height: 12px; "><br></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; min-height: 12px; "><br></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; "><span class="Apple-tab-span" style="white-space:pre">	</span>ADIOI_Flatlist = (ADIOI_Flatlist_node *) ADIOI_Malloc(<span style="color: #0000ff">sizeof</span>(ADIOI_Flatlist_node));</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; ADIOI_Flatlist-&gt;type = MPI_DATATYPE_NULL;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; ADIOI_Flatlist-&gt;next = NULL;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; ADIOI_Flatlist-&gt;blocklens = NULL;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; ADIOI_Flatlist-&gt;indices = NULL;</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; ADIOI_Flatten_datatype(newtype);</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 10px/normal Helvetica; ">&nbsp; &nbsp; fprintf(stdout,<span style="color: #a31515">"ADIOI_Flatlist-&gt;count %d\n"</span>,ADIOI_Flatlist-&gt;count);</div></div><div><br></div><div><br></div><div>I added some neccesary files to the project from ADIO source code: ad_init, flatten.c, ad_darray, ad_subarray, and malloc.c.</div><div><br></div><div>I got values like:</div><div><br></div><div><br></div><div><div>C:\Program Files\MPICH2\examples\Release&gt;mpiexec -n 3 coll_perf -fname c:/temp/k</div><div>k</div><div>cur_idx = 98</div><div>count=98</div><div>cur_idx = 66</div><div>count=66</div><div>cur_idx = 98</div><div>count=98</div><div><br></div><div>Could you try run coll_perf printing the values of flat-&gt;count and cur_idx? On Linux always I got 3 for then. 3 is the correct value due to the datatype, is correct?</div><div><br></div><div>Best regards</div><div><div><br></div><div>El 09/07/2009, a las 16:11, mpich2 escribió:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div>--------------------+-------------------------------------------------------<br> Reporter: &nbsp;jayesh &nbsp;| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Owner: &nbsp;jayesh &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;Type: &nbsp;bug &nbsp;&nbsp;&nbsp;&nbsp;| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: &nbsp;new &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> Priority: &nbsp;major &nbsp;&nbsp;| &nbsp;&nbsp;&nbsp;Milestone: &nbsp;mpich2-1.1.1<br>Component: &nbsp;mpich2 &nbsp;| &nbsp;&nbsp;Resolution: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> Keywords: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &nbsp;<br>--------------------+-------------------------------------------------------<br><br><br>Comment (by jayesh):<br><br> Hi,<br> &nbsp;Can you try installing MPICH2 using the Installer available at the<br> downloads page<br> (<a href="http://www.mcs.anl.gov/research/projects/mpich2/downloads/index.php?s=downloads">http://www.mcs.anl.gov/research/projects/mpich2/downloads/index.php?s=downloads</a>)<br> and running coll_perf on it ? Let us know if that works for you (If so, we<br> can check your compiln configs to see if they are correct).<br><br> Regards,<br> Jayesh<br><br>-- <br>Ticket URL: &lt;<a href="https://trac.mcs.anl.gov/projects/mpich2/ticket/704#comment:9">https://trac.mcs.anl.gov/projects/mpich2/ticket/704#comment:9</a>&gt;<br></div></blockquote></div><br></div></body></html>