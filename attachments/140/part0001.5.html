<html>
<head>
<style>
.hmmessage P
{
margin:0px;
padding:0px
}
body.hmmessage
{
FONT-SIZE: 10pt;
FONT-FAMILY:Tahoma
}
</style>
</head>
<body class='hmmessage'>SORRY....<BR>i DID EXACTLY WHAT YOU SAiD.<BR>The first spawn goes&nbsp;ok but when there is the first <BR>call mpi_intercomm_merge() the programm blocks and it doesn't go on...no error messages are provided...just stop...<BR>&nbsp;<BR>maybe I have to use merge also in the slave programm.....No idea,,,,,<BR>&nbsp;<BR>p.s. sorry for my mails...I know I can be persisting...but it is not easy dealing with those things alone!!!<BR>I would be happy if you suggest me a good MPI manual!<BR>&nbsp;<BR>Thanks in advance,<BR>MLDB<BR><BR><BR><BR><BR>
<HR id=stopSpelling>
&gt; From: mpich2-maint@mcs.anl.gov<BR>&gt; Date: Thu, 18 Sep 2008 15:42:47 +0000<BR>&gt; Subject: Re: [mpich2-maint] #140: RE: [MPICH2 Req #4218]<BR>&gt; To: <BR>&gt; <BR>&gt; ---------------------------------------------------------------------+------<BR>&gt; Reporter: Maria Laura De Bellis &lt;maria.laura.debellis@hotmail.it&gt; | Owner: <BR>&gt; Type: bug | Status: closed<BR>&gt; Priority: major | Milestone: <BR>&gt; Component: mpich2 | Resolution: fixed <BR>&gt; Keywords: | <BR>&gt; ---------------------------------------------------------------------+------<BR>&gt; <BR>&gt; <BR>&gt; Comment (by Jayesh Krishna):<BR>&gt; <BR>&gt; Hi,<BR>&gt; Each time you call MPI_COMM_SPAWN() you get a different<BR>&gt; intercommunicator.<BR>&gt; <BR>&gt; ============== Right usage (Note that I use diff intercommunicators for<BR>&gt; subsequent calls) =====================<BR>&gt; call MPI_COMM_SPAWN('SLAVE.EXE,<BR>&gt; ' ',<BR>&gt; 1,<BR>&gt; MPI_INFO_NULL,<BR>&gt; 0,<BR>&gt; MPI_COMM_WORLD,<BR>&gt; slavecomm1,<BR>&gt; MPI_ERRCODES_IGNORE,<BR>&gt; ierr)<BR>&gt; call MPI_COMM_SPAWN('SLAVE.EXE,<BR>&gt; ' ',<BR>&gt; 1,<BR>&gt; MPI_INFO_NULL,<BR>&gt; 0,<BR>&gt; MPI_COMM_WORLD,<BR>&gt; slavecomm2,<BR>&gt; MPI_ERRCODES_IGNORE,<BR>&gt; ierr)<BR>&gt; ============== Right usage =====================<BR>&gt; In the example above the first child process with rank=0 will belong to<BR>&gt; slavecomm1 &amp; the second child process with rank=0 will belong to<BR>&gt; slavecomm2.<BR>&gt; <BR>&gt; If you call MPI_INTERCOMM_MERGE() you can merge the intercommunicator<BR>&gt; into an intracommunicator. You can use this intracommunicator in your next<BR>&gt; call to MPI_COMM_SPAWN(). In this way you will have a single<BR>&gt; intracommunicator.<BR>&gt; <BR>&gt; ============== Using MPI_INTERCOMM_MERGE() ===========<BR>&gt; call MPI_COMM_SPAWN('SLAVE.EXE,<BR>&gt; ' ',<BR>&gt; 1,<BR>&gt; MPI_INFO_NULL,<BR>&gt; 0,<BR>&gt; MPI_COMM_WORLD,<BR>&gt; slavecomm1,<BR>&gt; MPI_ERRCODES_IGNORE,<BR>&gt; ierr)<BR>&gt; C ==== In parent process have the "high" arg as 0 and in slave process<BR>&gt; have the "high" arg as 1<BR>&gt; call MPI_INTERCOMM_MERGE(slavecomm1, high, slaveintracomm, ierr)<BR>&gt; call MPI_COMM_SPAWN('SLAVE.EXE,<BR>&gt; ' ',<BR>&gt; 1,<BR>&gt; MPI_INFO_NULL,<BR>&gt; 0,<BR>&gt; slaveintracomm,<BR>&gt; slavecomm2,<BR>&gt; MPI_ERRCODES_IGNORE,<BR>&gt; ierr)<BR>&gt; C === Free the old slaveintracomm, merge slavecomm2 to get a new<BR>&gt; slaveintracomm &amp; use it for communicn<BR>&gt; ===================================================<BR>&gt; I would recommend that you go though a good book or tutorial on MPI and<BR>&gt; see the section on "dynamic processes" es.<BR>&gt; Let us know if you need further help.<BR>&gt; <BR>&gt; Regards,<BR>&gt; Jayesh<BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; _____<BR>&gt; <BR>&gt; From: Maria Laura De Bellis [mailto:maria.laura.debellis@hotmail.it]<BR>&gt; Sent: Thursday, September 18, 2008 7:23 AM<BR>&gt; To: Jayesh Krishna<BR>&gt; Subject: RE: [mpich2-maint] #140: RE: [MPICH2 Req #4218]<BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; Hi...<BR>&gt; I am writing again!!!!<BR>&gt; <BR>&gt; I try to explain my problem:<BR>&gt; <BR>&gt; I have implemented a finite element code using fortran 77 and MPICH2<BR>&gt; libraries to solve a multi-scale problem.<BR>&gt; I have a master program (corresponding to the macro-level) that has to<BR>&gt; call several slaves.<BR>&gt; Every slave is a copy of the same code for the microscopic level.<BR>&gt; <BR>&gt; I want to call the slave.exe not all at the same time. I want to call<BR>&gt; first of all 1 slave and I want it has "my_rank=0"<BR>&gt; then I want to call another (it is called whenever a prescribed condition<BR>&gt; is fullfilled) and I want it has "my_rank=1" and so on.<BR>&gt; <BR>&gt; I don't know, when I start thhe procedure, how many slaves have to be<BR>&gt; generated...it depends on the boundary conditions of the problem.<BR>&gt; <BR>&gt; I was trying with this procedure (but it doesn't work):<BR>&gt; <BR>&gt; <BR>&gt; In the master program:<BR>&gt; <BR>&gt; call MPI_COMM_SPAWN('SLAVE.EXE,<BR>&gt; ' ',<BR>&gt; 1,<BR>&gt; MPI_INFO_NULL,<BR>&gt; 0,<BR>&gt; MPI_COMM_WORLD,<BR>&gt; slavecomm,<BR>&gt; MPI_ERRCODES_IGNORE,<BR>&gt; ierr)<BR>&gt; <BR>&gt; at this time the first slave.exe has been creatted with "my_rank=0"<BR>&gt; <BR>&gt; then I do again<BR>&gt; <BR>&gt; call MPI_COMM_SPAWN('SLAVE.EXE,<BR>&gt; ' ',<BR>&gt; 1,<BR>&gt; MPI_INFO_NULL,<BR>&gt; 0,<BR>&gt; MPI_COMM_WORLD,<BR>&gt; slavecomm,<BR>&gt; MPI_ERRCODES_IGNORE,<BR>&gt; ierr)<BR>&gt; <BR>&gt; but now I have 2 slave.exe with the same my_rank==0......<BR>&gt; <BR>&gt; Maybe I should use MPI_INTERCOOMM_MERGE.....but I am able to makke it<BR>&gt; works!!!<BR>&gt; <BR>&gt; <BR>&gt; What hhave I to do???<BR>&gt; HELP ME PLEASEEEEEE<BR>&gt; <BR>&gt; MLDB<BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; _____<BR>&gt; <BR>&gt; From: jayesh@mcs.anl.gov<BR>&gt; To: maria.laura.debellis@hotmail.it<BR>&gt; Subject: RE: [mpich2-maint] #140: RE: [MPICH2 Req #4218]<BR>&gt; Date: Tue, 16 Sep 2008 09:47:35 -0500<BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; Hi,<BR>&gt; The processes spawned by an MPI_COMM_SPAWN() have their own<BR>&gt; MPI_COMM_WORLD. The spawned processes have the ranks determined by their<BR>&gt; MPI_COMM_WORLD. To communicate with the spawned process/es the parent<BR>&gt; process needs to use the intercommunicator returned by MPI_COMM_SPAWN().<BR>&gt; Usually (And I guess this is what you want to do) users want to spawn new<BR>&gt; processes and make it part of a single intra-communicator (like<BR>&gt; COMM_WORLD). You can do this by spawning processes and merging them using<BR>&gt; MPI_INTERCOMM_MERGE().<BR>&gt; I am providing below a sample usage of MPI_COMM_SPAWN() in a fortran<BR>&gt; program (Look closely at the 2nd arg),<BR>&gt; <BR>&gt; C ============ sample usage of MPI_COMM_SPAWN() in fortran<BR>&gt; ================<BR>&gt; integer np, ierr<BR>&gt; integer intercomm<BR>&gt; integer errcodes(2)<BR>&gt; <BR>&gt; np = 2<BR>&gt; call MPI_Comm_spawn( "slave.exe", MPI_ARGV_NULL, np, MPI_INFO_NULL, 0,<BR>&gt; MPI_COMM_WORLD, intercomm, errcodes,ierr )<BR>&gt; <BR>&gt; <BR>&gt; C =================================================================<BR>&gt; <BR>&gt; Let us know if this helps.<BR>&gt; <BR>&gt; Regards,<BR>&gt; Jayesh<BR>&gt; <BR>&gt; <BR>&gt; _____<BR>&gt; <BR>&gt; From: Maria Laura De Bellis [mailto:maria.laura.debellis@hotmail.it]<BR>&gt; Sent: Tuesday, September 16, 2008 9:13 AM<BR>&gt; To: Jayesh Krishna<BR>&gt; Subject: RE: [mpich2-maint] #140: RE: [MPICH2 Req #4218]<BR>&gt; <BR>&gt; <BR>&gt; Hi jayes...here I am wtiting to you again!!!<BR>&gt; I have a question:<BR>&gt; when a new process is dynamically created using the command:<BR>&gt; <BR>&gt; call MPI_COMM_SPAWN('slave.exe',<BR>&gt; ' ',<BR>&gt; 1,<BR>&gt; MPI_INFO_NULL,<BR>&gt; 0,<BR>&gt; MPI_COMM_WORLD,<BR>&gt; slavecomm,<BR>&gt; MPI_ERRCODES_IGNORE,<BR>&gt; ierr)<BR>&gt; <BR>&gt; is the rank automatically assigned to the new process?<BR>&gt; <BR>&gt; Till now I was generating several copies of the 'slave.exe' at once....now<BR>&gt; I want to generate a new copy only when it is required because a<BR>&gt; proper check is passed....Is it enogh to call the processes in this manner<BR>&gt; or can I explicitate the rank in any manner????<BR>&gt; <BR>&gt; Thanks in advance!<BR>&gt; <BR>&gt; MLDB<BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; _____<BR>&gt; <BR>&gt; From: jayesh@mcs.anl.gov<BR>&gt; To: maria.laura.debellis@hotmail.it<BR>&gt; CC: mpich2-maint@mcs.anl.gov<BR>&gt; Subject: RE: [mpich2-maint] #140: RE: [MPICH2 Req #4218]<BR>&gt; Date: Mon, 15 Sep 2008 10:11:00 -0500<BR>&gt; <BR>&gt; Hi,<BR>&gt; As you mentioned in your email to dynamically create MPI processes you<BR>&gt; can use MPI_COMM_SPAWN (Also look into MPI_INTERCOMM_MERGE()).<BR>&gt; Let us know if you need further help.<BR>&gt; <BR>&gt; Regards,<BR>&gt; Jayesh<BR>&gt; <BR>&gt; <BR>&gt; -----Original Message-----<BR>&gt; From: owner-mpich2-bugs@mcs.anl.gov [mailto:owner-mpich2-bugs@mcs.anl.gov]<BR>&gt; On Behalf Of mpich2<BR>&gt; Sent: Monday, September 15, 2008 9:50 AM<BR>&gt; To: undisclosed-recipients:<BR>&gt; Subject: [mpich2-maint] #140: RE: [MPICH2 Req #4218]<BR>&gt; <BR>&gt; ---------------------------------------------------------------------+--<BR>&gt; ---------------------------------------------------------------------+--<BR>&gt; ---------------------------------------------------------------------+--<BR>&gt; Reporter: Maria Laura De Bellis &lt;maria.laura.debellis@hotmail.it&gt; |<BR>&gt; Type: bug<BR>&gt; Status: new |<BR>&gt; Priority: major<BR>&gt; Component: mpich2 |<BR>&gt; ---------------------------------------------------------------------+--<BR>&gt; ---------------------------------------------------------------------+--<BR>&gt; ---------------------------------------------------------------------+--<BR>&gt; <BR>&gt; <BR>&gt; Hi...<BR>&gt; I am new in MPI programming and I really need help!!<BR>&gt; I use fortran 77 and MPICH2 with Windows. Is it possible to implement a<BR>&gt; program with 1 master.exe and several slaves.exe in which the slaves are<BR>&gt; not generated all at once but can born successively during the<BR>&gt; computation?<BR>&gt; I try to explain better: I want to check, during the computation, if a<BR>&gt; new slave.exe is needed or not....just if it is needed I want to call a<BR>&gt; new process...<BR>&gt; Can I use the comand<BR>&gt; <BR>&gt; call MPI_COMM_SPAWN<BR>&gt; <BR>&gt; to generate 1 process at time or is there a more specific MPI-command???<BR>&gt; <BR>&gt; <BR>&gt; PLEASE HELP ME!!!<BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; _________________________________________________________________<BR>&gt; Stanco della solita finestra? Personalizza la tua Hotmail!<BR>&gt; http://www.messenger.it/personalizza.html#sfondi<BR>&gt; <BR>&gt; <BR>&gt; --<BR>&gt; Ticket URL: &lt;https://trac.mcs.anl.gov/projects/mpich2/ticket/140&gt;<BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; <BR>&gt; _____<BR>&gt; <BR>&gt; 5GB di spazio per i tuoi file online. È gratis, è SkyDrive!<BR>&gt; &lt;http://skydrive.live.com/&gt;<BR>&gt; <BR>&gt; _____<BR>&gt; <BR>&gt; Crea gli inviti, contatta i tuoi amici e condividi le foto. I tuoi<BR>&gt; &lt;http://home.services.spaces.live.com/events/?mkt=it-it&gt; Eventi sono Live!<BR>&gt; <BR>&gt; -- <BR>&gt; Ticket URL: &lt;https://trac.mcs.anl.gov/projects/mpich2/ticket/140#comment:&gt;<BR><br /><hr />Crosswire, il gioco delle relazioni. <a href='http://livesearch.games.msn.com/crosswire/play_it/' target='_new'>Sei pronto per la sfida?</a></body>
</html>